<!-- prettier-ignore -->
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ case_study.title }} | Giuseppe Mancini{% endblock %}

{% block body_class %}case-studies-single{% endblock %}

{% block content %}
<main class="case-content">
  <!-- Hero Section -->
  <section class="case-hero fade-in">
    <div class="case-hero__content">
      <h1 class="case-hero__title">{{ case_study.title }}</h1>
      <p class="case-hero__description">{{ case_study.short_description }}</p>
    </div>
  </section>

  <!-- Main Content Container -->
  <div class="case-container">
    <!-- Overview Section -->
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Overview</h2>
        <div class="case-card__content">
          <p>{{ case_study.full_description }}</p>
        </div>
      </div>
    </section>

    <!-- Technologies Section -->
    {% if case_study.technologies.all %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Technologies</h2>
        <div class="case-card__content">
          <ul class="tech-list">
            {% for tech in case_study.technologies.all %}
            <li class="tech-badge">{{ tech.name }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Purpose Section -->
    {% if case_study.purpose %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Purpose & Objectives</h2>
        <div class="case-card__content">
          <p>{{ case_study.purpose|linebreaks }}</p>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Features Section -->
    {% if case_study.features %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Key Features</h2>
        <div class="case-card__content">
          <ul class="feature-list">
            {% for line in case_study.features.splitlines %} {% if line.strip %}
            <li>{{ line|safe }}</li>
            {% endif %} {% endfor %}
          </ul>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Architecture Section -->
    {% if case_study.architecture %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Architecture & Structure</h2>
        <div class="case-card__content">
          <ul class="feature-list">
            {% for line in case_study.architecture.splitlines %} {% if
            line.strip %}
            <li>{{ line|safe }}</li>
            {% endif %} {% endfor %}
          </ul>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Technical Challenges Section -->
    {% if case_study.technical_challenges %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Technical Challenges</h2>
        <div class="case-card__content">
          <ul class="feature-list">
            {% for line in case_study.technical_challenges.splitlines %} {% if
            line.strip %}
            <li>{{ line|safe }}</li>
            {% endif %} {% endfor %}
          </ul>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Accomplishments Section -->
    {% if case_study.accomplishments %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Accomplishments</h2>
        <div class="case-card__content">
          <p>{{ case_study.accomplishments|linebreaks }}</p>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Final Consideration Section -->
    {% if case_study.final_consideration %}
    <section class="case-section fade-in-scroll">
      <div class="case-card">
        <h2 class="case-card__title">Lessons Learned</h2>
        <div class="case-card__content">
          <p>{{ case_study.final_consideration|linebreaks }}</p>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Action Links Section -->
    <section class="case-section case-actions fade-in-scroll">
      <div class="case-links">
        {% if case_study.live_url %}
        <a
          href="{{ case_study.live_url }}"
          class="btn btn--primary"
          target="_blank"
          rel="noopener"
        >
          <i class="fas fa-external-link-alt"></i> View Live Site
        </a>
        {% endif %} {% if case_study.github_url %}
        <a
          href="{{ case_study.github_url }}"
          class="btn btn--secondary"
          target="_blank"
          rel="noopener"
        >
          <i class="fab fa-github"></i> View on GitHub
        </a>
        {% endif %}
      </div>
      <a href="{% url 'pages:projects' %}" class="btn btn--outline">
        <i class="fas fa-arrow-left"></i> Back to Projects
      </a>
    </section>
  </div>
</main>

<script>
  // Intersection Observer for fade-in animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, observerOptions);

  const fadeElements = document.querySelectorAll(".fade-in-scroll");
  fadeElements.forEach((el) => observer.observe(el));
</script>
{% endblock %}
